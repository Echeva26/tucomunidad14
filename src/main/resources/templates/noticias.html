<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Comunidad Etsit</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="stylesheet" href="../static/css/ejemplo.css" />
</head>

<body>
  <!-- CABECERA -->
  <div class="cabecera">
    <span class="reserva-de-zonas" style="text-align: center;">
      Noticias
      <div class="search-bar">
        <input type="text" id="searchInput" placeholder="Buscar noticias...">
        <button onclick="searchNews()">Buscar</button>
      </div>
    </span>
    <div class="container">
      <div class="tu-comunidad">
        TuComunidad
      </div>
      <p class="home">
        <a href="/comunidad" style="text-decoration: none;">
          <span class="home-sub-30">Home</span>
          <span></span>
        </a>
      </p>
      <div class="log-out">
        <span class="our-works">
          <a href="/" style="text-decoration: none;">Log out</a>
        </span>
      </div>
      <div class="usuario">
        Vecino
      </div>
    </div>
  </div>

  <div class="pagina">
    <div class="container-6" id="noticias-container"></div>
  </div>

  <!-- PIE DE PAGINA -->
  <div class="pie-de-pagina">
    <div class="container-5">
      <div class="image-2"></div>
      <div class="container-4">
        <img class="icon-1" src="../static/vectors/intagram.svg" />
        <img class="icon-2" src="../static/vectors/facebook.svg" />
        <img class="icon-3" src="../static/vectors/twitter.svg" />
      </div>
      <div class="idioma">
        <span class="language">
          Idioma
        </span>
        <img class="icon-color" src="../static/vectors/flecha.svg" />
      </div>
    </div>
    <div class="description">
      Facilitamos la convivencia en tu comunidad
    </div>
    <div class="line"></div>
    <span class="tucom">
      ©TuComunidad 2024
    </span>
  </div>

  <script>
    window.onload = function () {
      // Función para obtener parámetros de la URL
      function getQueryParam(param) {
        var searchParams = new URLSearchParams(window.location.search);
        return searchParams.get(param);
      }

      // Obtener ID de la comunidad de la URL
      var idComunidad = getQueryParam('idcomunidad');

      // Función para obtener noticias por comunidad
      function obtenerNoticiasPorComunidad() {
        fetch(`/obtenerinfoporcomunidad?idcomunidad=${idComunidad}`)
          .then(response => {
            if (!response.ok) {
              throw new Error('No se pudieron obtener las noticias de la comunidad');
            }
            return response.json();
          })
          .then(data => {
            // Renderizar las noticias
            renderizarNoticias(data);
          })
          .catch(error => {
            console.error('Error:', error);
          });
      }

      // Función para renderizar las noticias en el HTML
      function renderizarNoticias(noticias) {
        var noticiasContainer = document.getElementById('noticias-container');
        noticias.forEach(noticia => {
          var elementoNoticia = `
            <div class="elemento">
              <div class="borde-azul"></div>
              <img class="imagen" src="${noticia.foto}" alt="${noticia.titulo}" />
              <div class="contenido">
                <h2 class="titulo">
                  <a href="#">${noticia.titulo}</a>
                </h2>
                <p class="descripcion">
                  ${noticia.descripcion}
                </p>
                <div class="leer-mas">
                  <a href="#" class="reservar-1">Leer más</a>
                </div>
              </div>
            </div>
          `;
          noticiasContainer.innerHTML += elementoNoticia;
        });
      }

      obtenerNoticiasPorComunidad();
    };
  </script>
</body>

</html>
